<div class="bg-neutral-300 relative w-full h-screen overflow-hidden">
  <div class="px-8">
    <h1 class="text-lg text-gray-700 font-serif font-medium mt-8">ユーザー登録</h1>
    <%= form_with model: @user, local: true, class: "space-y-6",
                  data: { controller: "postal-code" } do |f| %>

    <%= render 'layouts/error_messages', object: f.object %>
      <!-- 郵便番号 -->
      <div class="flex items-start gap-10">
        <!-- ラベル部分 -->
        <div class="flex-shrink-0 w-28">
          <label class="block text-sm text-gray-700 font-serif mb-1">
            郵便番号
          </label>
          <p class="text-xs text-gray-700 mb-0">*気象情報取得用</p>
          <p class="text-xs text-gray-700 mt-0">*半角/ハイフンなし</p>
        </div>

        <!-- 入力フィールド部分 -->
        <div class="flex-1 mt-2.5">
          <div class="flex items-center">
            <span class="text-gray-700 mr-2">〒</span>
            <%= f.text_field :postal_code,
                            class: "w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",
                            placeholder: "1234567",
                            maxlength: "7",
                            data: {
                              postal_code_target: "postalCode",
                              action: "input->postal-code#validatePostalCode"
                            } %>
          </div>
          <div data-postal-code-target="status"></div>
        </div>
      </div>

      <!-- 隠しフィールド（デバッグ用・本番では不要） -->
      <% if Rails.env.development? %>
        <div class="text-xs text-gray-500">
          <%= f.hidden_field :latitude %>
          <%= f.hidden_field :longitude %>
          <p>緯度: <span id="latitude-display"><%= @user.latitude %></span></p>
          <p>経度: <span id="longitude-display"><%= @user.longitude %></span></p>
        </div>
      <% end %>

        <!-- メールアドレス -->
      <div>
          <label class="block text-sm text-gray-700 font-serif mb-1">
            メールアドレス
          </label>
          <p class="text-xs text-gray-700 mb-2">*ログイン時に使用</p>

          <%= f.email_field :email,
                            class: "w-full max-w-sm px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",
                            placeholder: "example@email.com" %>
      </div>

      <!-- パスワード -->
      <div class="space-y-2">
        <div>
          <label class="block text-sm text-gray-700 font-serif mb-1">
            パスワード
          </label>
          <p class="text-xs text-gray-700 mb-2">*ログイン時に使用</p>

          <%= f.password_field :password,
                              class: "w-full max-w-sm px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",
                              placeholder: "パスワードを入力" %>
        </div>

        <div>
          <%= f.password_field :password_confirmation,
                              class: "w-full max-w-sm px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-700",
                              placeholder: "パスワードを再入力" %>
        </div>
      </div>

      <!-- 登録ボタン -->
      <div class="text-center">
        <%= f.submit "登録",
                    class: "w-40 bg-gray-500 hover:bg-red-800 text-white py-3 px-4 rounded-md transition-colors duration-200 cursor-pointer" %>
      </div>
    <% end %>
  </div>
</div>
